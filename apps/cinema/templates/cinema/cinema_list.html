{% extends 'core/base.html' %}
{% load static %}
{% load i18n %}

{% block title %}KinoCMS - {% trans "Наши кинотеатры" %}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/frontend/cinema-list.css' %}">
{% endblock %}

{% block content %}
    <h1 class="page-title">{% trans "Наши кинотеатры" %}</h1>
    
    <!-- Cinema Cards Grid -->
    <div class="cinema-cards {% if cinemas|length == 1 %}single-cinema{% endif %}">
        {% for cinema in cinemas %}
            <a href="{% url 'cinema:cinema_detail' cinema.id %}" class="cinema-card">
                <!-- Cinema Logo -->
                {% if cinema.logo %}
                    <div class="cinema-logo">
                        <img src="{{ cinema.logo.url }}" alt="{{ cinema.name }}">
                    </div>
                {% else %}
                    <div class="cinema-logo-placeholder">
                        <i class="fas fa-building"></i>
                    </div>
                {% endif %}
                
                <!-- Cinema Name -->
                <h3>{{ cinema.name }}</h3>
            </a>
        {% empty %}
            <!-- Sample cinemas for demonstration if no cinemas exist -->
            <a href="#" class="cinema-card">
                <div class="cinema-logo-placeholder">
                    <i class="fas fa-building"></i>
                </div>
                <h3>{% trans "Кинотеатр Премьер" %}</h3>
            </a>
            
            <a href="#" class="cinema-card">
                <div class="cinema-logo-placeholder">
                    <i class="fas fa-building"></i>
                </div>
                <h3>{% trans "Кинотеатр Мультиплекс" %}</h3>
            </a>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Add keyboard navigation support
        document.querySelectorAll('.cinema-card').forEach(function(card) {
            card.setAttribute('tabindex', '0');
            card.setAttribute('role', 'link');
            
            card.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    const href = this.getAttribute('href');
                    if (href && href !== '#') {
                        window.location.href = href;
                    }
                }
            });
        });
        
        // Add smooth transition on focus
        document.querySelectorAll('.cinema-card').forEach(function(card) {
            card.addEventListener('focus', function() {
                this.style.outline = '2px solid var(--accent-color)';
                this.style.outlineOffset = '2px';
            });
            
            card.addEventListener('blur', function() {
                this.style.outline = 'none';
            });
        });
    });
</script>
{% endblock %}